<tr id="schedule-{{ schedule.id }}" {% if is_expired %}data-expired="true" {% endif %}
    class="{% if is_expired %}opacity-50{% endif %}">
    <td class="font-medium">{{ schedule.meeting.name }}</td>
    <td>
        {% set st_val = schedule.schedule_type.value if schedule.schedule_type is not string else schedule.schedule_type
        %}
        {% if st_val == 'cron' %}
        <span class="badge badge-warning badge-sm font-bold mr-2 rounded">CRON</span>
        <span class="text-sm">{{ cron_description or schedule.cron_expression or '-' }}</span>
        {% else %}
        <span class="badge badge-info badge-sm font-bold mr-2 rounded">ONCE</span>
        <span class="text-sm">{{ schedule.start_time | localtime('%Y-%m-%d %H:%M') if schedule.start_time else '-'
            }}</span>
        {% endif %}
    </td>
    <td>
        {% if schedule.duration_mode == 'auto' %}
        <span class="badge badge-primary badge-sm rounded">AUTO</span>
        {% else %}
        {{ (schedule.duration_sec / 60) | int }} min
        {% endif %}
    </td>
    <td class="text-sm">
        {% if schedule.next_run_at %}
        {{ schedule.next_run_at | localtime('%m/%d %H:%M') }}
        {% else %}
        -
        {% endif %}
    </td>
    <td>
        {% if schedule.youtube_enabled %}
        <span class="badge badge-success badge-sm rounded">{{ schedule.youtube_privacy|upper }}</span>
        {% else %}
        <span class="badge badge-neutral badge-sm rounded">OFF</span>
        {% endif %}
    </td>
    <td>
        <form hx-post="/schedules/{{ schedule.id }}/toggle" hx-target="#schedule-{{ schedule.id }}" hx-swap="outerHTML">
            <input type="checkbox" class="toggle toggle-sm toggle-primary" {% if schedule.enabled %}checked{% endif %}
                onchange="this.form.requestSubmit()">
        </form>
    </td>
    <td>
        <div class="flex gap-1">
            <form method="POST" action="/schedules/{{ schedule.id }}/trigger" class="inline">
                <button type="submit" class="btn btn-ghost btn-xs {% if is_expired %}btn-disabled opacity-50{% endif %}"
                    title="Trigger now" {% if is_expired %}disabled{% endif %}>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
                    </svg>
                </button>
            </form>
            <a href="/schedules/{{ schedule.id }}/edit"
                class="btn btn-ghost btn-xs {% if is_expired %}btn-disabled opacity-50{% endif %}" {% if is_expired
                %}aria-disabled="true" tabindex="-1" {% endif %}>Edit</a>
            <button class="btn btn-ghost btn-xs text-error" hx-delete="/schedules/{{ schedule.id }}"
                hx-target="#schedule-{{ schedule.id }}" hx-swap="outerHTML" hx-confirm="Delete this schedule?">
                Delete
            </button>
        </div>
    </td>
</tr>